"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[562],{562:function(t,e,n){n.r(e);var i=n(439),r=n(791),a=n(582),s=n(147),c=n(184);e.default=function(){var t=(0,r.useState)([]),e=(0,i.Z)(t,2),n=e[0],o=e[1];return(0,r.useEffect)((function(){(0,a.ru)().then((function(t){o(t.results)})).catch((function(t){return console.log(t)}))}),[]),(0,c.jsx)("main",{children:n.length>0&&(0,c.jsx)(s.K,{movies:n,title:"Movies Trending"})})}},147:function(t,e,n){n.d(e,{K:function(){return g}});var i={mainTitle:"ListFilms_mainTitle__I7yBu",buttonLike:"ListFilms_buttonLike__COiqj",buttonLikeIcon:"ListFilms_buttonLikeIcon__R9L2z",active:"ListFilms_active__ia8+S",list:"ListFilms_list__uTo02",list__item:"ListFilms_list__item__1qvcv",link:"ListFilms_link__4i0si",box_title:"ListFilms_box_title__y4GFf",text_name:"ListFilms_text_name__Hxp0l",text_average:"ListFilms_text_average__T4IME",image:"ListFilms_image__FPQ0L",box_item:"ListFilms_box_item__KtOiu"},r=n(942),a=n(433),s=n(439),c=n(87),o=n(689),u=n(791);var l=n.p+"static/media/symbol-defs.4c7b23e474753e31ce1c97bc1a15e200.svg",f=n(791),m=f.useEffect,_=f.useState;function v(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=v(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}var p=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=v(t))&&(i&&(i+=" "),i+=e);return i},d=n(184),h=function(t){var e=t.id,n=t.title,f=t.poster_path,v=t.vote_average,h=(0,o.TH)(),g=(0,u.useState)(!1),x=(0,s.Z)(g,2),b=x[0],k=x[1],L=function(t,e){var n=localStorage.getItem(t),i=n?JSON.parse(n):e,r=_(i),a=(0,s.Z)(r,2),c=a[0],o=a[1];return m((function(){localStorage.setItem(t,JSON.stringify(c))}),[t,c]),[c,o]}("likeMovie",[]),j=(0,s.Z)(L,2),y=j[0],w=j[1],Z="https://image.tmdb.org/t/p/w500".concat(f);return(0,d.jsxs)("li",{className:i.list__item,children:[(0,d.jsx)("button",{className:p([i.buttonLike],(0,r.Z)({},i.active,b),{inactive:!b}),onClick:function(){return function(t,e,n,i){var r=JSON.parse(localStorage.getItem("likeMovie"));k(!0);var s={id:t,title:e,poster_path:n,vote_average:i};if(r.findIndex((function(t){return t.id===s.id}))>=0){var c=r.filter((function(t){return t.id!==s.id}));k(!1),w(c)}else w((function(t){return[].concat((0,a.Z)(y),[s])}))}(e,n,f,v)},children:(0,d.jsx)("svg",{className:i.buttonLikeIcon,width:15,height:15,children:(0,d.jsx)("use",{href:l+"#icon-heart"})})}),(0,d.jsxs)(c.rU,{to:"/movies/".concat(e),state:{from:h},className:i.link,children:[null===f?(0,d.jsx)("img",{width:"300",src:"https://st2.depositphotos.com/3643473/6205/i/950/depositphotos_62059967-stock-photo-3d-man-with-a-binocular.jpg",alt:n,className:i.image}):(0,d.jsx)("img",{width:"300",src:Z,alt:n,className:i.image}),(0,d.jsxs)("div",{className:i.box_title,children:[(0,d.jsx)("p",{className:i.text_name,children:n}),(0,d.jsx)("p",{className:i.text_average,children:v.toFixed(1)})]})]})]},e)},g=function(t){var e=t.movies,n=t.title;return(0,d.jsxs)("div",{className:i.box,children:[n&&(0,d.jsx)("h1",{className:i.mainTitle,children:"Movies Trending"}),(0,d.jsx)("ul",{className:i.list,children:null===e||void 0===e?void 0:e.map((function(t){var e=t.id,n=t.title,i=t.poster_path,r=t.vote_average;return(0,d.jsx)(h,{id:e,title:n,poster_path:i,vote_average:r})}))})]})}},582:function(t,e,n){n.d(e,{Oh:function(){return m},gL:function(){return f},kh:function(){return _},m9:function(){return l},ru:function(){return u}});var i=n(861),r=n(757),a=n.n(r),s=n(243),c="cb9f3ba1d1c3cba355cedf3c9174f5a3",o="https://api.themoviedb.org/3";s.Z.defaults.baseURL="https://api.themoviedb.org/3";var u=function(){var t=(0,i.Z)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.get("".concat(o,"/trending/movie/day?api_key=").concat(c));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return s.Z.get("/search/movie",{params:{query:t,language:"en - US",page:e,include_adult:!0,api_key:c,total_pages:8}}).then((function(t){return t.data}))},f=function(){var t=(0,i.Z)(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.get("".concat(o,"/movie/").concat(e,"?api_key=").concat(c,"&language=en-US"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(t){return s.Z.get("/movie/".concat(t,"/credits"),{params:{api_key:c,language:"en - US"}}).then((function(t){return t.data}))},_=function(){var t=(0,i.Z)(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.get("".concat(o,"/movie/").concat(e,"/reviews?api_key=").concat(c,"&language=en-US&page=1"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},942:function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return i}})}}]);
//# sourceMappingURL=562.82d9370a.chunk.js.map