"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[562],{562:function(t,e,n){n.r(e);var i=n(439),r=n(791),a=n(582),s=n(342),o=n(184);e.default=function(){var t=(0,r.useState)([]),e=(0,i.Z)(t,2),n=e[0],c=e[1];return(0,r.useEffect)((function(){(0,a.ru)().then((function(t){c(t.results)})).catch((function(t){return console.log(t)}))}),[]),(0,o.jsx)("main",{children:n.length>0&&(0,o.jsx)(s.K,{movies:n,title:"Movies Trending"})})}},342:function(t,e,n){n.d(e,{K:function(){return d}});var i=n(439),r={mainTitle:"ListFilms_mainTitle__I7yBu",buttonLike:"ListFilms_buttonLike__COiqj",buttonLikeIcon:"ListFilms_buttonLikeIcon__R9L2z",active:"ListFilms_active__ia8+S",list:"ListFilms_list__uTo02",list__item:"ListFilms_list__item__1qvcv",link:"ListFilms_link__4i0si",box_title:"ListFilms_box_title__y4GFf",text_name:"ListFilms_text_name__Hxp0l",text_average:"ListFilms_text_average__T4IME",image:"ListFilms_image__FPQ0L",box_item:"ListFilms_box_item__KtOiu"},a=n(791),s=n(942),o=n(433),c=n(87),u=n(689);var l=n.p+"static/media/symbol-defs.4c7b23e474753e31ce1c97bc1a15e200.svg";function m(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=m(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}var f=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=m(t))&&(i&&(i+=" "),i+=e);return i},_=n(184),v=a.memo((function(t){var e=t.id,n=t.title,m=t.poster_path,v=t.vote_average,d=t.isLike,p=(0,u.TH)(),g=(0,a.useState)(d),h=(0,i.Z)(g,2),x=h[0],b=h[1],k="https://image.tmdb.org/t/p/w500".concat(m);return(0,_.jsxs)("li",{className:r.list__item,children:[(0,_.jsx)("button",{className:f([r.buttonLike],(0,s.Z)({},r.active,d),{inactive:!x}),onClick:function(){return function(t,e,n,i){var r,a=null!==(r=JSON.parse(localStorage.getItem("likeMovie")))&&void 0!==r?r:[],s={id:t,title:e,poster_path:n,vote_average:i};if(a.findIndex((function(t){return t.id===s.id}))>=0){var c=a.filter((function(t){return t.id!==s.id}));window.localStorage.setItem("likeMovie",JSON.stringify(c))}else{var u=[].concat((0,o.Z)(a),[s]);window.localStorage.setItem("likeMovie",JSON.stringify(u))}b(!x)}(e,n,m,v)},children:(0,_.jsx)("svg",{className:r.buttonLikeIcon,width:15,height:15,children:(0,_.jsx)("use",{href:l+"#icon-heart"})})}),(0,_.jsxs)(c.rU,{to:"/movies/".concat(e),state:{from:p},className:r.link,children:[null===m?(0,_.jsx)("img",{width:"300",src:"https://st2.depositphotos.com/3643473/6205/i/950/depositphotos_62059967-stock-photo-3d-man-with-a-binocular.jpg",alt:n,className:r.image}):(0,_.jsx)("img",{width:"300",src:k,alt:n,className:r.image}),(0,_.jsxs)("div",{className:r.box_title,children:[(0,_.jsx)("p",{className:r.text_name,children:n}),(0,_.jsx)("p",{className:r.text_average,children:v.toFixed(1)})]})]})]},e)})),d=function(t){var e=t.movies,n=t.title,s=(0,a.useState)([]),o=(0,i.Z)(s,2),c=o[0],u=o[1],l=(0,a.useCallback)((function(){return JSON.parse(localStorage.getItem("likeMovie"))||[]}),[]);return(0,a.useEffect)((function(){u(l),console.log("\u0440\u0435\u043d\u0434\u0435\u0440 \u043b\u0456\u0441\u0442 \u0444\u0456\u043b\u043c")}),[l,c]),(0,_.jsxs)("div",{className:r.box,children:[n&&(0,_.jsx)("h1",{className:r.mainTitle,children:"Movies Trending"}),(0,_.jsx)("ul",{className:r.list,children:null===e||void 0===e?void 0:e.map((function(t){var e=t.id,n=t.title,i=t.poster_path,r=t.vote_average,a=c.some((function(t){return t.id===e}));return(0,_.jsx)(v,{id:e,title:n,poster_path:i,vote_average:r,isLike:a},e)}))})]})}},582:function(t,e,n){n.d(e,{Oh:function(){return f},gL:function(){return m},kh:function(){return _},m9:function(){return l},ru:function(){return u}});var i=n(861),r=n(757),a=n.n(r),s=n(243),o="cb9f3ba1d1c3cba355cedf3c9174f5a3",c="https://api.themoviedb.org/3";s.Z.defaults.baseURL="https://api.themoviedb.org/3";var u=function(){var t=(0,i.Z)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.get("".concat(c,"/trending/movie/day?api_key=").concat(o));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return s.Z.get("/search/movie",{params:{query:t,language:"en - US",page:e,include_adult:!0,api_key:o,total_pages:8}}).then((function(t){return t.data}))},m=function(){var t=(0,i.Z)(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.get("".concat(c,"/movie/").concat(e,"?api_key=").concat(o,"&language=en-US"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(t){return s.Z.get("/movie/".concat(t,"/credits"),{params:{api_key:o,language:"en - US"}}).then((function(t){return t.data}))},_=function(){var t=(0,i.Z)(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.get("".concat(c,"/movie/").concat(e,"/reviews?api_key=").concat(o,"&language=en-US&page=1"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},942:function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return i}})}}]);
//# sourceMappingURL=562.8201d973.chunk.js.map